# データベースを正規化できる

エンティティを定義した EC サイトの仕様をベースとして進みます。

## 1. 第一正規形

ECサイトを、第一正規形になるようテーブル設計してください。テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。

その際に、下記のポイントを抑えるようにしてください。

- アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
- テーブルごとにプライマリーキーが設定されていること
- 1つのセルに1つの値のみが含まれること

以下、回答例です。

[ユーザーズ注文履歴テーブル]

- ユーザーID
- ユーザー名
- 購入した日付
- 値段
- カテゴリーID
- カテゴリー名
- 商品ID
- 商品名
- カートID
- 決済時間

プライマリーキー：ユーザーID,カートID

| ユーザーID | ユーザー名 | カートID | 購入時間 | 日付 | 値段 | カテゴリーID | カテゴリー名 | 商品ID | 商品名 |
| ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- |
| 1 | 山浦清透 | 001 | 04141200 | 0414 | 100000 | CA01 | スマートフォン | GOODS001 | iPhone13 |
| 1 | 山浦清透 | 002 | 04171800 | 0417 | 2000 | CA05 |  ビール | GOODS111 | キリン一番搾り生ビール |

## 2. 第二正規形

ECサイトの第一正規形の設計を、第二正規形になるようテーブル設計してください。テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。

その際に、下記のポイントを抑えるようにしてください。

- アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
- 部分的関数従属性がないこと

※第二正規形は、テーブル内で部分関数従属を解消し、完全関数従属のみテーブルをつくること

[ユーザー]

- ユーザーID
- ユーザー名

プライマリーキー：ユーザーID

[カート]
- ユーザーID
- カートID
- 決済時間
- 購入した日付
- 値段
- カテゴリーID
- カテゴリー名
- 商品ID
- 商品名

プライマリーキー：ユーザーID,カートID

| ユーザーID | カートID | 購入時間 | 日付 | 値段 | カテゴリーID | カテゴリー名 | 商品ID | 商品名 |
| ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- |
| 1 |  001 | 04141200 | 0414 | 100000 | CA01 | スマートフォン | GOODS001 | iPhone13 |
| 1 |  002 | 04171800 | 0417 | 2000 | CA05 |  ビール | GOODS111 | キリン一番搾り生ビール |

| ユーザーID | ユーザー名 |
| ---------- | ---------- |
| 1 | 山浦清透 |




部分関数従属(主キーの一部の列に対して従属する列がある)
完全関数従属(主キーを構成するすべての列に従属性がある)
第二正規形：テーブル内で部分関数従属を解消し、完全関数従属のみテーブルをつくること

## 3. 第三正規形

ECサイトの第二正規形の設計を、第三正規形になるようテーブル設計してください。テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。

なお今回は、要件として「カテゴリーIDをキーとして、カテゴリーごとに商品を検索できる」が追加されたとします。

その際に、下記のポイントを抑えるようにしてください。

- アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
- 推移的関数従属性がないこと

※非キー列はキー列に対してのみ従属している状態

[ユーザー]

- ユーザーID
- ユーザー名

プライマリーキー：ユーザーID

[カート]
- ユーザーID
- カートID
- カテゴリーID
- 決済時間
- 購入した日付
- 値段
- 商品ID
- 商品名

[カテゴリー]
- カテゴリーID
- カテゴリー名

プライマリーキー：ユーザーID,カートID,カテゴリーID

| ユーザーID | カートID | 購入時間 | 日付 | 値段 | カテゴリーID | 
| ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | 
| 1 |  001 | 04141200 | 0414 | 100000 | CA01 | 
| 1 |  002 | 04171800 | 0417 | 2000 | CA05 |  

| ユーザーID | ユーザー名 |
| ---------- | ---------- |
| 1 | 山浦清透 |

| カテゴリID | カテゴリ名 | 商品ID |
| ---------- | ---------- | ---------- |
| CA01  | スマートフォン | GOODS001 |
| CA05  | ビール | GOODS111 |

| 商品ID | 商品名 |
| ---------- | ---------- |
| GOODS001 | iPhone13 | 
| GOODS111 | キリン一番搾り生ビール | 

## 4. ボイスコッド正規形

病院の管理システムのデータベースを設計してください。

要件は次の通りです。

- 患者と診療科が決まると担当医師も決まる(担当医師は一人のみ)
- 一人の医師は一つの診療科を担当する
- 一人の患者は複数の診療科を受診することがある

現在、次のテーブルが作成されています。

[担当医師テーブル]

- 患者
- 診療科
- 担当医師

プライマリーキー：患者,診療科

このテーブルはボイスコッド正規形になっていません。

このテーブルがボイスコッド正規形になるよう設計してください。テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。